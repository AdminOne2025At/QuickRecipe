# دليل بناء تطبيق أندرويد من موقع كويك ريسب

هذا الدليل يشرح كيفية تحويل موقع كويك ريسب إلى تطبيق أندرويد (APK) يمكن تثبيته على الأجهزة المحمولة.

## المتطلبات الأساسية

قبل البدء، تأكد من توفر التالي:

1. **تثبيت Node.js و npm** (الإصدار 14 أو أحدث)
2. **تثبيت Android Studio**
   - يمكنك تحميله من [الموقع الرسمي](https://developer.android.com/studio)
   - تأكد من تثبيت Android SDK (يأتي مع Android Studio)
3. **تثبيت Java Development Kit (JDK)** الإصدار 11 أو أحدث
4. **تهيئة متغيرات البيئة**:
   - `ANDROID_SDK_ROOT` يشير إلى مجلد Android SDK
   - `JAVA_HOME` يشير إلى مجلد JDK

## خطوات بناء التطبيق

### 1. تجهيز المشروع

قمنا بالفعل بتثبيت حزم Capacitor اللازمة:
- `@capacitor/core`: المكتبة الأساسية
- `@capacitor/cli`: أداة سطر الأوامر
- `@capacitor/android`: دعم منصة أندرويد

تم إنشاء ملف `capacitor.config.ts` بالإعدادات المناسبة مثل:
- معرف التطبيق: `com.egyptco.quickrecipe`
- اسم التطبيق: `كويك ريسب`
- دعم اللغة العربية والواجهة RTL

### 2. بناء تطبيق الويب

```bash
# بناء موقع الويب
npm run build
```

هذا سينشئ مجلد `dist` الذي يحتوي على ملفات HTML/CSS/JS النهائية.

### 3. تهيئة مشروع Capacitor

```bash
# تهيئة المشروع
npx cap init "كويك ريسب" "com.egyptco.quickrecipe"

# إضافة منصة أندرويد
npx cap add android
```

هذا سينشئ مجلد `android` يحتوي على مشروع Android Studio كامل.

### 4. نسخ ملفات البناء وتحديث المشروع

```bash
# مزامنة التغييرات
npx cap sync android
```

### 5. تخصيص أيقونة التطبيق وشاشة البداية

1. استبدل الأيقونات الافتراضية في `android/app/src/main/res/mipmap-*`
2. قم بتخصيص شاشة البداية في `android/app/src/main/res/drawable/splash.png`

### 6. فتح المشروع في Android Studio

```bash
npx cap open android
```

### 7. بناء ملف APK

في Android Studio:
1. انقر على قائمة `Build`
2. اختر `Build Bundle(s) / APK(s)`
3. اختر `Build APK(s)`
4. انتظر حتى انتهاء عملية البناء
5. سيظهر إشعار مع رابط "locate" انقر عليه للوصول إلى ملف APK

ملف APK سيكون موجوداً في:
`android/app/build/outputs/apk/debug/app-debug.apk`

### 8. تثبيت التطبيق على جهاز الأندرويد

يمكنك نقل ملف APK إلى جهازك وتثبيته مباشرة. تأكد من تفعيل "تثبيت من مصادر غير معروفة" في إعدادات الجهاز.

## تسهيل العملية

استخدم السكريبت `build-apk.sh` الذي يقوم بتنفيذ الخطوات 1-6 تلقائياً:

```bash
# تنفيذ السكريبت (تأكد من إعطائه صلاحيات التنفيذ أولاً)
chmod +x build-apk.sh
./build-apk.sh
```

## الاختلافات بين تطبيق الويب والتطبيق المحمول

- **تجربة مستخدم أفضل**: تطبيق مخصص بدلاً من صفحة ويب في المتصفح
- **الوصول دون اتصال**: يمكن استخدام بعض ميزات التطبيق حتى بدون اتصال بالإنترنت
- **الإشعارات**: يمكن إرسال إشعارات للمستخدم
- **الوصول لميزات الجهاز**: يمكن الوصول لميزات مثل الكاميرا والموقع وغيرها

## الخطوات المتقدمة (اختيارية)

- **توقيع التطبيق**: إنشاء مفتاح توقيع مخصص لنشر التطبيق رسمياً
- **تحسين الأداء**: تخصيص WebView لتحسين أداء التطبيق
- **دعم الوضع المظلم**: تكييف الألوان والثيم مع إعدادات النظام
- **تخصيص شاشة البداية**: إضافة رسوم متحركة لشاشة البداية

## المشاكل الشائعة

1. **خطأ في بناء Android Studio**: تأكد من تحديث Android Studio و Gradle إلى أحدث إصدار
2. **مشاكل في المكتبات**: تأكد من أن جميع التبعيات متوافقة
3. **مشاكل العرض**: قد تحتاج لتعديل CSS للتوافق مع شاشات الأجهزة المحمولة
4. **الاتصال بـ API**: تأكد من استخدام عناوين URL المطلقة للاتصال بخدمات API

## موارد إضافية

- [توثيق Capacitor الرسمي](https://capacitorjs.com/docs)
- [دليل تطوير تطبيقات Android](https://developer.android.com/guide)
- [دليل توقيع التطبيقات](https://developer.android.com/studio/publish/app-signing)